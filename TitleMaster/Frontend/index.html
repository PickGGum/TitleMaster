<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>칭호 게임 - 입장</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="light">
  <div class="container">
    <h1>칭호 게임 🎮</h1>

    <div class="card">
      <h2>방 생성</h2>
      <input id="hostName" type="text" placeholder="닉네임 입력" />
      <button id="createRoomBtn">방 만들기</button>
    </div>

    <div class="card">
      <h2>방 참가</h2>
      <input id="playerName" type="text" placeholder="닉네임 입력" />
      <input id="roomCode" type="text" placeholder="방 코드 입력" />
      <button id="joinRoomBtn">참가하기</button>
    </div>

    <button id="toggleMode">🌙 다크/라이트 전환</button>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="scripts/socket.js"></script>
  <script>
    const socket = io();

    // 방 생성
    document.getElementById("createRoomBtn").addEventListener("click", () => {
      const name = document.getElementById("hostName").value.trim();
      if (!name) return alert("닉네임을 입력하세요!");
      socket.emit("createRoom", { name }, ({ roomCode }) => {
        localStorage.setItem("roomCode", roomCode);
        localStorage.setItem("nickname", name);
        localStorage.setItem("isHost", "true");
        window.location.href = "waiting.html";
      });
    });

    // 방 참가
    document.getElementById("joinRoomBtn").addEventListener("click", () => {
      const name = document.getElementById("playerName").value.trim();
      const roomCode = document.getElementById("roomCode").value.trim().toUpperCase();
      if (!name || !roomCode) return alert("닉네임과 방 코드를 입력하세요!");
      socket.emit("joinRoom", { roomCode, name }, (res) => {
        if (res.error) return alert(res.error);
        localStorage.setItem("roomCode", roomCode);
        localStorage.setItem("nickname", name);
        localStorage.setItem("isHost", "false");
        window.location.href = "waiting.html";
      });
    });

    // 모드 전환
    document.getElementById("toggleMode").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      document.body.classList.toggle("light");
    });
  </script>
</body>
</html>
